"use strict";(self.webpackChunkMultibrowser=self.webpackChunkMultibrowser||[]).push([[60],{32866:(e,t,a)=>{a.d(t,{B:()=>r});var l=a(67294),n=a(87536),r=function(e){var t=e.as,a=e.errors,r=e.name,c=e.message,s=e.render,m=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)t.indexOf(a=r[l])>=0||(n[a]=e[a]);return n}(e,["as","errors","name","message","render"]),o=(0,n.Gc)(),d=(0,n.U2)(a||o.formState.errors,r);if(!d)return null;var i=d.message,u=d.types,E=Object.assign({},m,{children:i||c});return l.isValidElement(t)?l.cloneElement(t,E):s?s({message:i||c,messages:u}):l.createElement(t||l.Fragment,E)}},62679:(e,t,a)=>{a.d(t,{Z:()=>l}),a(67294);const l={formatDate:e=>{const t=new Date(e),a=String(t.getDate()).padStart(2,"0");return String(t.getMonth()+1).padStart(2,"0")+"-"+a+"-"+t.getFullYear()},formatDateTime:e=>{const t=new Date(e),a=t.getHours(),l=t.getMinutes(),n=t.getSeconds(),r=String(t.getDate()).padStart(2,"0");return a+":"+l+":"+n+" "+String(t.getMonth()+1).padStart(2,"0")+"-"+r+"-"+t.getFullYear()}}},73060:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var l=a(67294),n=a(9669),r=a.n(n),c=a(79672),s=(a(28216),a(11358)),m=a.n(s),o=a(91837),d=a(27018);const i=(0,l.createContext)();function u({children:e}){const[t,a]=(0,l.useState)([]),[n,r]=(0,l.useState)(!1),[c,s]=(0,l.useState)([]),m={isCheck:t,isCheckAll:n,isShared:c,handleSelectAll:e=>t=>{let l=[],n=[];t.target.checked?(l=e.map((e=>e.uuid)),n=e.map((e=>e.shared_uuid)),r(!0)):r(!1),a(l),s(n)},handleClick:e=>{const{id:l,checked:n,dataset:r}=e.target;let m=r.shared_uuid;n?(a([...t,l]),s([...c,m])):(a(t.filter((e=>e!==l))),s(c.filter((e=>e!==m))))},resetChecked:()=>{a([]),r(!1),s([])},handleRefuseShare:async(e,t,a)=>{o.Z.refuseShareFolder(e).then((e=>{d.ZP.defaultToast(e),a(t)}))}};return l.createElement(i.Provider,{value:m},e)}var E=a(62679),b=a(26793),p=a(5977);function h({getTotal:e,openModal:t,handleDelete:a,getTypeTable:n},s){const[o,d]=(0,b.$)(),[u,h]=(0,l.useState)("owner"),[N,f]=(0,l.useState)([]),[k,g]=(0,l.useState)(0),[v,w]=(0,l.useState)(1),x=(0,p.k6)(),y=async(t="owner")=>{let a;switch(t){case"owner":a=c.cE+c.BZ;break;case"shared":a=c.cE+c.oQ}await r().get(a+`?page=${v}&limit=10`).then((a=>{const l=a.data,r=l.meta.total;e(r),n(t),g(Math.ceil(r/10)),f(l.data.content),S.resetChecked()}))};(0,l.useEffect)((()=>{y(u)}),[u,v]);const S=(0,l.useContext)(i),C=e=>{h(e)};(0,l.useImperativeHandle)(s,(()=>({reloadTable(e="owner"){y(e)}})));const D=(e,t)=>{x.push({pathname:"/",state:{typeFolder:e,uuidFolder:t}})};return l.createElement("div",{className:"card card-bordered card-stretch"},l.createElement("div",{className:"card-inner-group"},l.createElement("div",{className:"card-inner position-relative card-tools-toggle"},l.createElement("div",{className:"card-title-group"},l.createElement("div",{className:"card-tools"},l.createElement("div",{className:"form-inline flex-nowrap gx-3"},l.createElement("a",{href:"#",className:"owner"==u?"btn btn-primary me-2":"btn btn-light me-2",onClick:e=>{e.preventDefault(),C("owner")}},l.createElement("i",{className:"las la-user"}),l.createElement("span",null,"Your Folders"),"owner"==u?l.createElement("em",{className:"icon ni ni-chevron-down"}):l.createElement("em",{className:"icon ni ni-chevron-right"})),l.createElement("a",{href:"#",className:"shared"==u?"btn btn-primary me-2":"btn btn-light me-2",onClick:e=>{e.preventDefault(),C("shared")}},l.createElement("i",{className:"las la-folder-open"}),l.createElement("span",null,"Shared Folders"),"shared"==u?l.createElement("em",{className:"icon ni ni-chevron-down"}):l.createElement("em",{className:"icon ni ni-chevron-right"}))))),l.createElement("div",{className:"card-search search-wrap","data-search":"search"},l.createElement("div",{className:"card-body"},l.createElement("div",{className:"search-content"},l.createElement("a",{href:"#",className:"search-back btn btn-icon toggle-search","data-target":"search",onClick:e=>e.preventDefault()},l.createElement("em",{className:"icon ni ni-arrow-left"})),l.createElement("input",{type:"text",className:"form-control border-transparent form-focus-none",id:"search_box",placeholder:"Search by name"}),l.createElement("button",{className:"search-submit btn btn-icon"},l.createElement("em",{className:"icon ni ni-search"})))))),l.createElement("div",{className:"card-inner p-0"},l.createElement("table",{className:"nk-tb-list nk-tb-ulist"},l.createElement("thead",null,l.createElement("tr",{className:"nk-tb-item nk-tb-head"},l.createElement("th",{className:"nk-tb-col nk-tb-col-check"},l.createElement("div",{className:"custom-control custom-control-sm custom-checkbox notext"},l.createElement("input",{type:"checkbox",className:"custom-control-input",id:"pid-all",name:"selectAll",onChange:S.handleSelectAll(N),checked:S.isCheckAll}),l.createElement("label",{className:"custom-control-label",htmlFor:"pid-all"}))),l.createElement("th",{className:"nk-tb-col"},l.createElement("span",{className:"sub-text ms-5"},"Name")),l.createElement("th",{className:"nk-tb-col text-center"},l.createElement("span",{className:"sub-text"},"Profiles")),l.createElement("th",{className:"nk-tb-col text-center"},l.createElement("span",{className:"sub-text"},"owner"===u?"Created":"Owner")),l.createElement("th",{className:"nk-tb-col nk-tb-col-tools text-end"},l.createElement("span",{className:"sub-text"},"Action")))),l.createElement("tbody",null,N.length>0?N.map((e=>l.createElement("tr",{key:e.uuid,className:"nk-tb-item"},l.createElement("td",{className:"nk-tb-col nk-tb-col-check"},l.createElement("div",{className:"custom-control custom-control-sm custom-checkbox notext"},l.createElement("input",{type:"checkbox",className:"custom-control-input",name:"select_Profile",id:e.uuid,"data-shared_uuid":e.shared_uuid,onChange:S.handleClick,checked:S.isCheck.includes(e.uuid)}),l.createElement("label",{className:"custom-control-label",htmlFor:e.uuid}))),l.createElement("td",{className:"nk-tb-col",role:"button",onClick:t=>{e.total_browser>0&&D(u,e.uuid)}},l.createElement("span",{className:"ms-4"},l.createElement("em",{className:"icon ni ni-folder-fill"})," ",e.name)),l.createElement("td",{className:"nk-tb-col text-center",role:"button",onClick:t=>{e.total_browser>0&&D(u,e.uuid)}},l.createElement("span",null,e.total_browser>1?e.total_browser+" profiles":e.total_browser+" profile")),l.createElement("td",{className:"nk-tb-col text-center",role:"button",onClick:t=>{e.total_browser>0&&D(u,e.uuid)}},l.createElement("span",null,"owner"===u?E.Z.formatDate(e.created_at):e.user_share)),l.createElement("td",{className:"nk-tb-col nk-tb-col-tools"},l.createElement("ul",{className:"nk-tb-actions gx-1 me-1"},l.createElement("li",null,l.createElement("div",{className:"dropdown"},l.createElement("a",{href:"#",onClick:e=>e.preventDefault(),className:"dropdown-toggle btn btn-sm btn-icon btn-trigger","data-bs-toggle":"dropdown"},l.createElement("em",{className:"icon ni ni-more-h"})),l.createElement("div",{className:"dropdown-menu dropdown-menu-end"},"owner"===u?l.createElement("ul",{className:"link-list-opt no-bdr"},l.createElement("li",null,l.createElement("a",{href:"#",onClick:a=>{a.preventDefault(),t(!0,"shareFolder",{id:e.uuid})}},l.createElement("span",null,"Share"))),l.createElement("li",null,l.createElement("a",{href:"#",onClick:a=>{a.preventDefault(),t(!0,"addFolder",e)}},l.createElement("span",null,"Rename"))),l.createElement("li",null,l.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),a([e.uuid])}},l.createElement("span",null,"Delete")))):l.createElement("ul",{className:"link-list-opt no-bdr"},l.createElement("li",null,l.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),S.handleRefuseShare([e.shared_uuid],u,y)}},l.createElement("span",null,"Refuse")))))))))))):l.createElement("tr",null,l.createElement("td",{className:"text-center p-3 justify-content-center",colSpan:"5"},l.createElement("span",null,o("Data is empty."))))))),l.createElement("div",{className:"card-inner"},l.createElement("div",{className:"nk-block-between-md g-3 paginate-box"},l.createElement("div",{className:"g"},l.createElement(m(),{previousLabel:"Prev",nextLabel:"Next",breakLabel:"...",pageCount:k,marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:e=>{w(e.selected+1)},containerClassName:"pagination justify-content-center justify-content-md-start",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}))))))}const N=(0,l.forwardRef)(h),f=function({handleDelete:e,reloadTable:t,typeFolder:a}){const n=(0,l.useContext)(i);return n.isCheck.length>0&&l.createElement("div",{className:"card card-bordered card-preview"},l.createElement("div",{className:"card-inner"},l.createElement("a",{href:"#",className:"btn btn-sm btn-outline-danger mx-1",onClick:t=>{t.preventDefault(),e(n.isCheck)}},l.createElement("i",{className:"las la-trash-alt"})," Delete"),"owner"===a?"":l.createElement("a",{href:"#",className:"btn btn-sm btn-outline-danger mx-1",onClick:e=>{e.preventDefault(),n.handleRefuseShare(n.isShared,a,t)}},l.createElement("i",{className:"las la-undo"})," Refuse")))};var k=a(92200),g=a(87536),v=a(32866),w=a(45954);function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},x.apply(this,arguments)}function y({isShowing:e,modalName:t,data:a,hide:n,reloadMainTable:s}){const[m,o]=(0,b.$)(),[i,u]=(0,l.useState)([]);let E="shareFolder";const p=async()=>{r().get(c.cE+c.Lw+`/${a.id}`).then((e=>{const t=e.data;u(t.content)})).catch((e=>{d.ZP.defaultToast(e)}))};(0,l.useEffect)((()=>{e&&t.includes(E)&&p()}),[e]);const{register:h,handleSubmit:N,reset:f,setFocus:k,formState:{errors:y}}=(0,g.cI)();return(0,l.useRef)(),l.createElement("div",{className:e&&t.includes(E)?"modal fade show d-block":"modal fade",tabIndex:"-1",id:"proxyModal"},l.createElement("div",{className:"modal-dialog modal-md",role:"document"},l.createElement("div",{className:"modal-content modal-content-md"},l.createElement("button",{className:"close btn-close-modal",onClick:()=>n(!1,E)},l.createElement("em",{className:"icon ni ni-cross"})),l.createElement("div",{className:"modal-header"},l.createElement("h5",{className:"modal-title"},"Share profile")),l.createElement("div",{className:"modal-body"},l.createElement("form",{className:"form-group group-add-center",onSubmit:N((async e=>{e.folder_uuid=a.id,r().post(c.cE+c.Qz,e).then((e=>{d.ZP.defaultToast(e),p()})).catch((e=>{d.ZP.defaultToast(e)})),f(),k("recepient")}))},l.createElement("label",{className:"form-label pe-2",htmlFor:"add_email"},"Email shared:"),l.createElement("div",{className:"form-group d-flex pe-2"},l.createElement("div",{className:"form-group"},l.createElement("input",x({type:"text",className:"form-control input-email",id:"add_email",placeholder:"example@gmail.com"},h("recepient",{required:w.ro,pattern:{value:w.Rq,message:w.YO}}))),l.createElement(v.B,{errors:y,name:"recepient",as:"p",className:"validateFail"})),l.createElement("div",{className:"form-group"},l.createElement("select",x({className:"form-select select-role js-select2",id:"role_profile",defaultValue:"admin"},h("role",{required:w.ro})),l.createElement("option",{value:"admin"},"admin"),l.createElement("option",{value:"guest"},"guest")))),l.createElement("input",{type:"submit",className:"btn btn-outline-primary btn-status",value:"Add"})),l.createElement("div",{className:"card-inner p-0"},l.createElement("table",{className:"table nk-tb-list nk-tb-ulist"},l.createElement("thead",{className:"table-light"},l.createElement("tr",{className:"nk-tb-item nk-tb-head"},l.createElement("th",{className:"nk-tb-col text-center first-col"},l.createElement("span",{className:"sub-text"},"STT")),l.createElement("th",{className:"nk-tb-col text-center"},l.createElement("span",{className:"sub-text"},"Name")),l.createElement("th",{className:"nk-tb-col text-end ps-4"},l.createElement("span",{className:"sub-text"},"Role")),l.createElement("th",{className:"nk-tb-col text-end pe-5"}," ",l.createElement("span",{className:"sub-text"},"Action")))),l.createElement("tbody",null,i.length>0?i.map(((e,t)=>l.createElement("tr",{key:e.email,className:"nk-tb-item"},l.createElement("td",{className:"nk-tb-col first-col"},l.createElement("span",null,t+1)),l.createElement("td",{className:"nk-tb-col d-flex"},l.createElement("span",null,e.email)),l.createElement("td",{className:"nk-tb-col d-flex justify-content-end ps-4"},l.createElement("span",null,e.role)),l.createElement("td",{className:"nk-tb-col text-end"},l.createElement("a",{href:"#",className:"btn btn-sm btn-danger",onClick:t=>{t.preventDefault(),(async e=>{r().delete(c.cE+c.eW,{data:{shared_uuid:e}}).then((e=>{d.ZP.defaultToast(e),p()})).catch((e=>{d.ZP.defaultToast(e)}))})(e.shared_uuid)}},"Unshare"))))):l.createElement("tr",null,l.createElement("td",{className:"text-center p-3 justify-content-center",colSpan:"5"},l.createElement("span",null,m("Data is empty.")))))))))))}const S=(0,l.memo)(y);function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},C.apply(this,arguments)}function D({isShowing:e,modalName:t,data:a,hide:n,reloadMainTable:s}){let m="addFolder";const{register:o,handleSubmit:i,reset:u,formState:{errors:E}}=(0,g.cI)();return(0,l.useLayoutEffect)((()=>{u()}),[e]),l.createElement("div",{className:e&&t.includes(m)?"modal fade show d-block":"modal fade",tabIndex:"-1",id:"proxyModal"},l.createElement("div",{className:"modal-dialog modal-md",role:"document"},l.createElement("div",{className:"modal-content"},l.createElement("button",{className:"close btn-close-modal",onClick:()=>n(!1,m)},l.createElement("em",{className:"icon ni ni-cross"})),l.createElement("div",{className:"modal-header"},l.createElement("h5",{className:"modal-title"},a&&a.uuid?"Edit":"Add"," Folder")),l.createElement("div",{className:"modal-body"},l.createElement("form",{className:"form-group group-add-center justify-content-around gap-05 align-items-start",onSubmit:i((e=>{let t="post",l=c.cE+c.Sh,o={name:e.addfolder};a&&(t="put",l=c.cE+c.Sh+"/"+a.uuid),r()({method:t,url:l,data:o}).then((e=>{n(!1,m),s(),d.ZP.defaultToast(e)})).catch((e=>{d.ZP.defaultToast(e)}))}))},l.createElement("label",{className:"form-label ",htmlFor:"add_folder"},"Folder name:"),l.createElement("div",{className:"form-group flex-grow-1 mb-0"},l.createElement("div",{className:"form-group"},l.createElement("input",C({type:"text",className:"form-control input-email",id:"add_folder",placeholder:"Sample folder"},o("addfolder",{value:a?a.name:"",required:w.ro}))),l.createElement(v.B,{errors:E,name:"addfolder",as:"p",className:"validateFail"}))),l.createElement("input",{type:"submit",className:"btn btn-outline-primary btn-status",value:a&&a.uuid?"Edit":"Add"}))))))}const _=(0,l.memo)(D),F=e=>{const[t,a]=(0,l.useState)(0),[n,s]=(0,l.useState)("owner"),m=(0,l.useRef)(),{isShowing:o,modalName:i,modalData:E,toggle:b}=(0,k.Z)(),p=((0,k.Z)(),(0,l.useCallback)(((e="owner")=>{console.log(e),m.current.reloadTable(e)}),[])),h=(e,t,a)=>{b(e,t,a)},g=e=>{let t="post",a=c._n+c.S8,l={uuid_folder:e};r()({method:t,url:a,data:l}).then((e=>{p(),d.ZP.defaultToast(e)})).catch((e=>{d.ZP.defaultToast(e)})),console.log(t,a)};return l.createElement(l.Fragment,null,l.createElement(u,null,l.createElement("div",{className:"nk-content "},l.createElement("div",{className:"container wide-xl"},l.createElement("div",{className:"nk-content-inner"},l.createElement("div",{className:"nk-content-body"},l.createElement("div",{className:"nk-content-wrap"},l.createElement("div",{className:"nk-block-head nk-block-head-sm"},l.createElement("div",{className:"nk-block-between"},l.createElement("div",{className:"nk-block-head-content"},l.createElement("h3",{className:"nk-block-title page-title"},"Folders"),l.createElement("div",{className:"nk-block-des text-soft"},l.createElement("p",null,"You have total ",t>1?t+" folders":t+" folder","."))),l.createElement("div",{className:"nk-block-head-content"},l.createElement("div",{className:"toggle-wrap nk-block-tools-toggle"},l.createElement("a",{href:"#",className:"btn btn-icon btn-trigger toggle-expand me-n1","data-target":"pageMenu"},l.createElement("em",{className:"icon ni ni-menu-alt-r"})),l.createElement("div",{className:"toggle-expand-content","data-content":"pageMenu"},l.createElement("ul",{className:"nk-block-tools g-3"},l.createElement("li",{className:"nk-block-tools-opt d-none d-sm-block"},l.createElement("a",{href:"#",className:"btn btn-primary",onClick:e=>{e.preventDefault(),h(!0,"addFolder",null)}},l.createElement("em",{className:"icon ni ni-plus"}),l.createElement("span",null,"Add Folder"))),l.createElement("li",{className:"nk-block-tools-opt d-block d-sm-none"},l.createElement("a",{href:"#",className:"btn btn-icon btn-primary"},l.createElement("em",{className:"icon ni ni-plus"}))))))))),l.createElement("div",{className:"nk-block"},l.createElement(f,{handleDelete:g,reloadTable:p,typeFolder:n})),l.createElement("div",{className:"nk-block table-block"},l.createElement(N,{getTotal:e=>{a(e)},ref:m,openModal:h,handleDelete:g,getTypeTable:e=>{s(e)}})),l.createElement(S,{isShowing:o,modalName:i,data:E,hide:b,reloadMainTable:p}),l.createElement(_,{isShowing:o,modalName:i,data:E,hide:b,reloadMainTable:p}))))))))}},91837:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(79672),n=a(9669),r=a.n(n);const c={refuseShareProfile:async e=>await r().delete(l._n+l.aB,{data:{shared_uuid:e}}),refuseShareFolder:async e=>await r().delete(l._n+l.Ut,{data:{shared_uuid:e}})}}}]);