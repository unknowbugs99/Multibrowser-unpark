(self.webpackChunkMultibrowser=self.webpackChunkMultibrowser||[]).push([[28],{65955:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var n=a(67294),l=a(26793);const c=(0,n.createContext)();function s({children:e}){const[t,a]=(0,n.useState)([]),[l,s]=(0,n.useState)(!1),[r,m]=(0,n.useState)([]),[o,i]=(0,n.useState)([]),d={isCheck:t,isCheckAll:l,isRunning:r,isStop:o,handleSelectAll:e=>t=>{let n=[],l=[],c=[];t.target.checked?(n=e.map((e=>e.id)),l=e.map((e=>{if("draft"===e.status)return e.id})).filter((e=>void 0!==e)),c=e.map((e=>{if("running"===e.status)return e.id})).filter((e=>void 0!==e)),s(!0)):s(!1),a(n),m(l),i(c)},handleClick:e=>{const{id:n,checked:l,dataset:c}=e.target,s=c.running;l?(a([...t,parseInt(n)]),"draft"===s&&m([...r,parseInt(n)]),"running"===s&&i([...o,parseInt(n)])):(a(t.filter((e=>e!==parseInt(n)))),m(r.filter((e=>e!==parseInt(n)))),i(o.filter((e=>e!==parseInt(n)))))},resetChecked:()=>{a([]),s(!1)}};return n.createElement(c.Provider,{value:d},e)}var r=a(11358),m=a.n(r),o=a(9669),i=a.n(o),d=a(27018),u=a(79672),p=a(65868),b=a(73727);function g({getTotal:e,openModal:t,handleStatus:a},s){const[r,o]=(0,l.$)(),[d,g]=(0,n.useState)([]),[E,N]=(0,n.useState)(0),[k,h]=(0,n.useState)(1),v=async()=>{i().get(u._n+u.DC+`?page=${k}&limit=10`).then((t=>{const a=t.data,n=a.meta.total;e(n),N(Math.ceil(n/10)),g(a.data.content),f.resetChecked()}))};(0,n.useEffect)((()=>{v()}),[k]);const f=(0,n.useContext)(c);return(0,n.useImperativeHandle)(s,(()=>({reloadTable(){v()}}))),n.createElement("div",{className:"card card-bordered card-stretch"},n.createElement("div",{className:"card-inner-group"},n.createElement("div",{className:"card-inner position-relative card-tools-toggle"},n.createElement("div",{className:"card-title-group"},n.createElement("div",{className:"card-tools"},n.createElement("div",{className:"form-inline flex-nowrap gx-3"}))),n.createElement("div",{className:"card-search search-wrap","data-search":"search"},n.createElement("div",{className:"card-body"},n.createElement("div",{className:"search-content"},n.createElement("a",{href:"#",className:"search-back btn btn-icon toggle-search","data-target":"search",onClick:e=>e.preventDefault()},n.createElement("em",{className:"icon ni ni-arrow-left"})),n.createElement("input",{type:"text",className:"form-control border-transparent form-focus-none",id:"search_box",placeholder:"Search by name"}),n.createElement("button",{className:"search-submit btn btn-icon"},n.createElement("em",{className:"icon ni ni-search"})))))),n.createElement("div",{className:"card-inner p-0"},n.createElement("table",{className:"nk-tb-list nk-tb-ulist"},n.createElement("thead",null,n.createElement("tr",{className:"nk-tb-item nk-tb-head"},n.createElement("th",{className:"nk-tb-col nk-tb-col-check"},n.createElement("div",{className:"custom-control custom-control-sm custom-checkbox notext"},n.createElement("input",{type:"checkbox",className:"custom-control-input",id:"pid-all",name:"selectAll",onChange:f.handleSelectAll(d),checked:f.isCheckAll}),n.createElement("label",{className:"custom-control-label",htmlFor:"pid-all"}))),n.createElement("th",{className:"nk-tb-col text-center"},n.createElement("span",{className:"sub-text ms-4"},"Name")),n.createElement("th",{className:"nk-tb-col text-center"},n.createElement("span",{className:"sub-text"},"Run type")),n.createElement("th",{className:"nk-tb-col text-center"},n.createElement("span",{className:"sub-text"},"Status")),n.createElement("th",{className:"nk-tb-col text-center"},n.createElement("span",{className:"sub-text"},"Profiles")),n.createElement("th",{className:"nk-tb-col nk-tb-col-tools text-center"},n.createElement("span",{className:"sub-text ms-3"},"Action")))),n.createElement("tbody",null,d.length>0?d.map((e=>{let l="";switch(e.run_type){case"randomly_one":l="Randomly one";break;case"all_randomly":l="All randomly";break;case"sequentially":l="Sequentially"}let c="";switch(e.status){case"draft":c=n.createElement("span",{className:"badge rounded-pill bg-light span-status"},"Draft");break;case"pending":c=n.createElement("span",{className:"badge rounded-pill bg-warning"},"Pending");break;case"running":c=n.createElement("span",{className:"badge rounded-pill bg-info"},"Running");break;case"complete":c=n.createElement("span",{className:"badge rounded-pill bg-success"},"Complete");break;case"rejected":c=n.createElement("span",{className:"badge rounded-pill bg-danger"},"Rejected")}return n.createElement("tr",{key:e.id,className:"nk-tb-item"},n.createElement("td",{className:"nk-tb-col nk-tb-col-check"},n.createElement("div",{className:"custom-control custom-control-sm custom-checkbox notext"},n.createElement("input",{type:"checkbox",className:"custom-control-input",name:"select_Profile",id:e.id,"data-running":e.status,onChange:f.handleClick,checked:f.isCheck.includes(e.id)}),n.createElement("label",{className:"custom-control-label",htmlFor:e.id}))),n.createElement("td",{className:"nk-tb-col text-center"},n.createElement("span",{className:"ms-4"},e.name)),n.createElement("td",{className:"nk-tb-col text-center"},n.createElement("span",null,l)),n.createElement("td",{className:"nk-tb-col text-center"},c),n.createElement("td",{className:"nk-tb-col text-center"},n.createElement("span",null,e.profiles.length)),n.createElement("td",{className:"nk-tb-col nk-tb-col-tools text-end"},n.createElement("ul",{className:"nk-tb-actions gx-1 me-1"},n.createElement("li",null,"draft"===e.status?n.createElement("a",{href:"#",className:"btn btn-sm btn-primary",onClick:t=>{t.preventDefault(),a([e.id],!0)}},r("Run")):"running"===e.status?n.createElement("a",{href:"#",className:"btn btn-sm btn-danger",onClick:t=>{t.preventDefault(),a([e.id],!1)}},r("Stop")):n.createElement("a",{href:"#",className:"btn btn-sm btn-light disabled",onClick:e=>{e.preventDefault()}},r("Run"))),n.createElement("li",null,n.createElement("div",{className:"dropdown"},n.createElement("a",{href:"#",onClick:e=>e.preventDefault(),className:"dropdown-toggle btn btn-sm btn-icon btn-trigger","data-bs-toggle":"dropdown"},n.createElement("em",{className:"icon ni ni-more-v"})),n.createElement("div",{className:"dropdown-menu dropdown-menu-end"},n.createElement("ul",{className:"link-list-opt no-bdr"},n.createElement("li",null,n.createElement(b.rU,{className:"draft"!==e.status&&"disabled",to:{pathname:p.KB,state:e}},n.createElement("span",null,r("Edit")))),n.createElement("li",null,n.createElement("a",{href:"#",onClick:a=>{a.preventDefault(),t(!0,"deleteCampaign",[e.id])}},n.createElement("span",null,r("Delete")))))))))))})):n.createElement("tr",null,n.createElement("td",{className:"text-center p-3 justify-content-center",colSpan:"5"},n.createElement("span",null,r("Data is empty."))))))),n.createElement("div",{className:"card-inner"},n.createElement("div",{className:"nk-block-between-md g-3 paginate-box"},n.createElement("div",{className:"g"},n.createElement(m(),{previousLabel:"Prev",nextLabel:"Next",breakLabel:"...",pageCount:E,marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:e=>{h(e.selected+1)},containerClassName:"pagination justify-content-center justify-content-md-start",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"}))))))}const E=(0,n.forwardRef)(g);var N=a(92200),k=a(94772);function h({isShowing:e,modalName:t,data:a,hide:c,reloadMainTable:s}){const[r,m]=(0,l.$)();let o="deleteCampaign";return n.createElement("div",{className:e&&t.includes(o)?"modal fade show d-block":"modal fade",tabIndex:"-1",id:"proxyModal"},n.createElement("div",{className:"modal-dialog delete-popup",role:"document"},n.createElement("div",{className:"modal-content"},n.createElement("div",{className:"header-dialog"},n.createElement("div",{className:"dialog-icon"},n.createElement("i",{className:"las la-trash-alt"})),n.createElement("h3",{className:"dialog-title"},r("Are you sure?"))),n.createElement("div",{className:"content-dialog"},n.createElement("p",null,r("You won't be able to reveal this!"))),n.createElement("div",{className:"actions-dialog"},n.createElement("button",{type:"button",className:"dialog-confirm btn btn-danger me-1",onClick:e=>{e.preventDefault(),k.Z.deleteCamps(a).then((e=>{e.data.content,c(!1,o),s(),d.ZP.defaultToast(e)})).catch((e=>{d.ZP.defaultToast(e)}))}},r("Yes, delete!")),n.createElement("button",{type:"button",className:"dialog-cancel btn btn-light ms-1",onClick:e=>{e.preventDefault(),c(!1,o)}},r("No, cancel"))))))}const v=(0,n.memo)(h),f=function({openModal:e,reloadMainTable:t,handleStatus:a}){const[s,r]=(0,l.$)(),m=(0,n.useContext)(c);return m.isCheck.length>0&&n.createElement("div",{className:"card card-bordered card-preview"},n.createElement("div",{className:"card-inner"},n.createElement("a",{href:"#",className:"btn btn-sm btn-outline-danger mx-1",onClick:t=>{t.preventDefault(),e(!0,"deleteCampaign",m.isCheck)}},n.createElement("i",{className:"las la-trash-alt"})," ",s("Delete")," (",m.isCheck.length,")"),n.createElement("a",{href:"#",className:m.isRunning.length>0?"btn btn-sm btn-outline-primary mx-1":"btn btn-sm btn-outline-primary mx-1 disabled",onClick:e=>{e.preventDefault(),a(m.isRunning,!0)}},n.createElement("i",{className:"las la-play-circle"})," ",s("Run campaign")," (",m.isRunning.length,")"),n.createElement("a",{href:"#",className:m.isStop.length>0?"btn btn-sm btn-outline-danger mx-1":"btn btn-sm btn-outline-danger mx-1 disabled",onClick:e=>{e.preventDefault(),a(m.isStop,!1)}},n.createElement("i",{className:"las la-pause-circle"})," ",s("Stop campaign")," (",m.isStop.length,")")))},C=()=>{const[e,t]=(0,l.$)(),[a,c]=(0,n.useState)(0),r=(0,n.useRef)(),{isShowing:m,modalName:o,modalData:i,toggle:d}=(0,N.Z)();(0,n.useEffect)((()=>{const e=window.api.mb_ipcRenderer.receiveMsg("campaign_reload",(e=>{"complete"===e.status&&u()}));return()=>{e&&e()}}));const u=(0,n.useCallback)((()=>{r.current.reloadTable()}),[]),g=(e,t,a)=>{d(e,t,a)},h=(e,t)=>{k.Z.runningCamp(e,t).then((e=>{u()}))};return n.createElement(n.Fragment,null,n.createElement(s,null,n.createElement("div",{className:"nk-content "},n.createElement("div",{className:"container wide-xl"},n.createElement("div",{className:"nk-content-inner"},n.createElement("div",{className:"nk-content-body"},n.createElement("div",{className:"nk-content-wrap"},n.createElement("div",{className:"nk-block-head nk-block-head-sm"},n.createElement("div",{className:"nk-block-between"},n.createElement("div",{className:"nk-block-head-content"},n.createElement("h3",{className:"nk-block-title page-title"},e("Campaigns")),n.createElement("div",{className:"nk-block-des text-soft"},n.createElement("p",null,e("You have total")," ",a>1?a+" "+e("campaigns"):a+" "+e("campaign"),"."))),n.createElement("div",{className:"nk-block-head-content"},n.createElement("div",{className:"toggle-wrap nk-block-tools-toggle"},n.createElement("a",{href:"#",className:"btn btn-icon btn-trigger toggle-expand me-n1","data-target":"pageMenu"},n.createElement("em",{className:"icon ni ni-menu-alt-r"})),n.createElement("div",{className:"toggle-expand-content","data-content":"pageMenu"},n.createElement("ul",{className:"nk-block-tools g-3"},n.createElement("li",{className:"nk-block-tools-opt d-none d-sm-block"},n.createElement(b.rU,{to:p.KB,className:"btn btn-primary"},n.createElement("em",{className:"icon ni ni-plus"}),n.createElement("span",null,e("Add Campaign")))))))))),n.createElement("div",{className:"nk-block"},n.createElement(f,{openModal:g,reloadMainTable:u,handleStatus:h})),n.createElement("div",{className:"nk-block table-block"},n.createElement(E,{getTotal:e=>{c(e)},ref:r,openModal:g,handleStatus:h}),n.createElement(v,{isShowing:m,modalName:o,data:i,hide:d,reloadMainTable:u})))))))))}},94772:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(9669),l=a.n(n),c=a(79672);a(80129);const s={getScripstByIds:async e=>{let t=e.map((function(e,t){return"ids["+t+"]="+e})).join("&");return await l().get(c._n+c.vl+"?"+t)},getProfilesByIds:async e=>{let t=e.map((function(e,t){return"ids["+t+"]="+e})).join("&");return await l().get(c._n+c.I0+"?"+t)},deleteCamps:async e=>l().delete(c._n+c.CN,{data:{ids:e}}),runningCamp:async(e,t)=>l().put(c._n+c.Py,{ids:e,isRunning:t})}},24654:()=>{}}]);